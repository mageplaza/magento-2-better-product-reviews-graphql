# Mageplaza
#
# NOTICE OF LICENSE
#
# This source file is subject to the Mageplaza.com license that is
# available through the world-wide-web at this URL:
# https://www.mageplaza.com/LICENSE.txt
#
# DISCLAIMER
#
# Do not edit or add to this file if you wish to upgrade this extension to newer
# version in the future.
#
# @category    Mageplaza
# @package     Mageplaza_BetterProductReviewsGraphQl
# @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
# @license     https://www.mageplaza.com/LICENSE.txt

type Query {
    mpBprGetReview(
        action: String! @doc(description: "Action in query.")
        filter: ReviewsFilterInput @doc(description: "Identifies which product attributes to search for and return.")
        reviewId: Int @doc(description: "Review ID use in the filter. Apply when action is get_view_review.")
        productId: Int @doc(description: "Product ID use in the filter. Apply when action is get_by_productId.")
        productSku: String @doc(description: "Product Sku use in the filter. Apply when action is get_by_productSku.")
        customerId: Int @doc(description: "Customer ID use in the filter. Apply when action is get_by_customerId.")
        pageSize: Int = 10 @doc(description: "How many items should show on the page.")
        currentPage: Int = 1 @doc(description: "Allows to using paging it start with 1.")
        sortType: MpBprSortType @doc(description: "Defines how reviews are sorted. Available values: newest, high_rating, helpfulness, date. When using 'date', both 'fromDate' and 'toDate' are required.")
        fromDate: String @doc(description: "Start date of the review filter range (format: YYYY-MM-DD). Required only when 'sortType' is set to 'date'.")
        toDate: String @doc(description: "End date of the review filter range (format: YYYY-MM-DD). Required only when 'sortType' is set to 'date'.")
    ):ReviewsOutput @resolver(class: "\\Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\Reviews") @doc(description: "The mpBprGetReview query searches for review that match the criteria specified in the filter.")
    mpBprGetConfig: BetterProductReviewConfig @resolver(class: "\\Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\GetConfig") @doc(description: "Get Configs")
}

type Mutation {
    mpBprCreateReview (
        input: ReviewInput!
        productId: Int! @doc(description: "Product ID used to add reviews.")
    ): NewReview @resolver(class: "\\Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\CreateReview") @doc(description:"Create a new Review")
    mpBPrAddImage(
        input : ImageReviewInput!
        reviewId: Int!
    ):Review @resolver(class: "\\Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\AddImageReview") @doc(description:"Add a Image to the Review")
    mpBPrRemoveImage(
        position : Int!
        reviewId: Int!
        storeId : String
    ):Review @resolver(class: "\\Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\RemoveImageReview") @doc(description:"Remove a Image from Review")
}

input ImageReviewInput {
    name : String!
    type_file : String!
    base_64_encoded_data : String!
    label : String
    storeId : String
}

input ReviewsFilterInput {
    created_at: FilterTypeInput  @doc(description: "Timestamp indicating when the review was created."),
    entity_id: FilterTypeInput  @doc(description: "The Entity ID."),
    status_id: FilterTypeInput  @doc(description: "Status code."),
    detail_id: FilterTypeInput  @doc(description: "Review detail ID."),
    title: FilterTypeInput  @doc(description: "Review title."),
    nickname: FilterTypeInput  @doc(description: "User nickname"),
    mp_bpr_helpful: FilterTypeInput  @doc(description: "Mageplaza BPR Helpful.")
}

input ReviewInput {
    title: String! @doc(description: "Review title."),
    detail: String! @doc(description: "Review detail."),
    nickname: String! @doc(description: "User nickname."),
    mp_bpr_images: String @doc(description: "Mageplaza BPR Review Images (Json)."),
    mp_bpr_recommended_product: String @doc(description: "Mageplaza BPR Recommended Product."),
    mp_bpr_helpful: Int @doc(description: "Mageplaza BPR Helpful."),
    avg_value: String! @doc(description: "Average summaried rating.")
}

enum MpBprSortType {
    newest @doc(description: "Sort by newest reviews.")
    high_rating @doc(description: "Sort by highest rating.")
    helpfulness @doc(description: "Sort by helpfulness.")
    date @doc(description: "Sort by date. Requires 'dateFrom' and 'dateTo' fields.")
}

type ReviewsOutput {
    total_count: Int @doc(description: "The number of reviews returned."),
    items: [Review] @doc(description: "An array of revie that match the specified search criteria.")
    pageInfo: PageInfo @doc(description: "An object that includes the page_info and currentPage values specified in the query.")
}

type ReviewsOutputNoPage {
    total_count: Int @doc(description: "The number of reviews returned."),
    items: [Review] @doc(description: "An array of review that match the specified search criteria.")
}

type PageInfo {
    pageSize: Int @doc(description: "How many items should show on the page.")
    currentPage: Int @doc(description: "Allow page number to start with 1.")
    hasNextPage: Boolean @doc(description: "Is next page")
    hasPreviousPage: Boolean @doc(description: "Is previous page")
    startPage: Int @doc(description: "Start page")
    endPage: Int @doc(description: "End page")
}

type Review {
    review_id: Int @doc(description: "An ID that uniquely identifies the review."),
    created_at: String @doc(description: "Timestamp indicating when the category was created."),
    entity_id: Int @doc(description: "Review entity ID."),
    entity_pk_value: Int @doc(description: "An ID that identifies the product."),
    status_id: Int @doc(description: "An ID that identifies the status."),
    detail_id: Int @doc(description: "An ID that identifies the review detail."),
    title: String @doc(description: "The title of the review."),
    detail: String @doc(description: "The detail of the review."),
    nickname: String @doc(description: "The nickname of the reviewer."),
    customer_id: Int @doc(description: "An ID that identifies the customer."),
    mp_bpr_images: String @doc(description: "Mageplaza BPR Review Images (Json)."),
    mp_bpr_recommended_product: String @doc(description: "Mageplaza BPR Recommended Product."),
    mp_bpr_verified_buyer: String @doc(description: "Mageplaza BPR Verified Buyer."),
    mp_bpr_helpful: Int @doc(description: "Mageplaza BPR Helpful."),
    reply_enabled: Int @doc(description: "Mageplaza reply is enabled."),
    reply_nickname: String @doc(description: "The nickname of the admin."),
    reply_content: String @doc(description: "The content of the reply."),
    reply_created_at: String @doc(description: "The timestamp indicating when the reply is created."),
    avg_value: String @doc(description: "The avg rating of the review."),
    products: Product @resolver(class: "Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\Review\\Product") @doc(description: "The products assigned to a review.")
}

type NewReview {
    review_id: Int @doc(description: "An ID that uniquely identifies the review."),
    created_at: String @doc(description: "Timestamp indicating when the category was created."),
    entity_id: Int @doc(description: "Review entity ID."),
    entity_pk_value: Int @doc(description: "An ID that identifies the product."),
    status_id: Int @doc(description: "An ID that identifies the status."),
    detail_id: Int @doc(description: "An ID that identifies the review detail."),
    title: String @doc(description: "The title of the review."),
    detail: String @doc(description: "The detail of the review."),
    nickname: String @doc(description: "The nickname of the reviewer."),
    customer_id: Int @doc(description: "An ID that identifies the customer."),
    mp_bpr_images: String @doc(description: "Mageplaza BPR Review Images (Json)."),
    mp_bpr_recommended_product: String @doc(description: "Mageplaza BPR Recommended Product."),
    mp_bpr_verified_buyer: String @doc(description: "Mageplaza BPR Verified Buyer."),
    mp_bpr_helpful: Int @doc(description: "Mageplaza BPR Helpful."),
    avg_value: String @doc(description: "The avg rating of the review.")
}

type Product {
    entity_id: Int @doc(description: "The ID number assigned to the product."),
    attribute_set_id: Int @doc(description: "The attribute set assigned to the product."),
    type_id: String @doc(description: "Represent simple, virtual, downloadable, grouped or configirable product type."),
    sku: String @doc(description: "A number or code assigned to a product to identify the product, options, price, and manufacturer."),
    has_options: Int @doc(description: "Indicate whether a product option is available."),
    required_options: Int @doc(description: "Indicate whether a product option is required."),
    created_at: String @doc(description: "Timestamp indicating when the product was created."),
    updated_at: String @doc(description: "Timestamp indicating when the product was updated."),
    review: ReviewsOutputNoPage @resolver(class: "Mageplaza\\BetterProductReviewsGraphQl\\Model\\Resolver\\Review\\Review") @doc(description: "The reviews assigned to a product.")
}

type BetterProductReviewConfig {
    general: BprGeneralConfig @doc(description: "General configuration settings.")
    write_review: BprWriteReviewConfig @doc(description: "Settings related to writing reviews.")
    review_listing: BprReviewListingConfig @doc(description: "Settings related to displaying reviews.")
    analytics: BprGoogleAnalyticsConfig @doc(description: "Google Analytics tracking configuration.")
    order: BprOrderConfig @doc(description: "Order related settings such as review reminders.")
}

type BprGeneralConfig {
    enabled: Boolean @doc(description: "Enable or disable Better Product Reviews.")
    review_remind: Boolean @doc(description: "Show purchased products without reviews in customer dashboard.")
    review_summary: Boolean @doc(description: "Enable Review Summary block on product page.")
    review_status: String @doc(description: "Default status for new reviews.")
    send_subscribed_only: Boolean @doc(description: "Send review reminder emails only to newsletter subscribers.")
    email: [BprEmailConfig] @doc(description: "Email address used as sender for review reminder emails.")
}

type BprEmailConfig {
    send: String @doc(description: "Time after order completion to send review reminder email.")
    sender: String @doc(description: "Email sender identity.")
    template: String @doc(description: "Email template for review reminder emails.")
}

type BprWriteReviewConfig {
    enabled: String @doc(description: "Enable or disable the write review feature.")
    customer_group: [Int] @doc(description: "Customer groups allowed to write reviews.")
    review_by_purchased: Boolean @doc(description: "Allow only customers who purchased the product to write reviews.")
    order_status: [String] @doc(description: "When a customer places an order with a certain product, if the selected Order State is satisfied, they will write a review for that product.")
    notice_message: String @doc(description: "The notice for customers who are not allowed to write reviews.")
    use_ajax: Boolean @doc(description: "Use AJAX to submit reviews without reloading the page.")
    recommend_product: String @doc(description: "Enable the 'Do you recommend this product?' option in the review form.")
    upload_images: Boolean @doc(description: "Allow customers to upload images with their reviews.")
    upload_limit: Int @doc(description: "Maximum number of images a customer can upload with a review.")
    upload_videos: Boolean @doc(description: "Allow customers to upload videos with their reviews.")
    upload_limit_video_size: Int @doc(description: "Maximum size (in MB) for each uploaded video.")
    term_conditions: BprTermConditionConfig
}

type BprTermConditionConfig {
    enabled: Boolean @doc(description: "Enable or disable the terms and conditions checkbox in the review form.")
    title: String @doc(description: "Title for the terms and conditions section.")
    anchor_text: String @doc(description: "Text for the terms and conditions link.")
    anchor_url: String @doc(description: "URL for the terms and conditions link.")
    is_checked: Boolean @doc(description: "Set the terms and conditions checkbox to be checked by default.")
}

type BprReviewListingConfig {
    enabled_helpful: Boolean @doc(description: "Enable or disable the helpfulness voting feature on reviews.")
    store_owner_answer: Boolean @doc(description: "Allow store owners to reply to customer reviews.")
    social_share: Boolean @doc(description: "Enable social media sharing options on reviews.")
    verified_buyer: Boolean @doc(description: "Display 'Verified Buyer' badge on reviews from verified purchasers.")
    show_nickname: Boolean @doc(description: "Display the reviewer's nickname on reviews.")
    review_date: Boolean @doc(description: "Display the date when the review was posted.")
    items_per_page: Int @doc(description: "Number of reviews to display per page.")
    sorting: BprSortingConfig @doc(description: "Configuration for review sorting options.")
}

type BprSortingConfig {
    enabled: Boolean @doc(description: "Enable or disable custom sorting options for reviews.")
    type: [Int] @doc(description: "Available sorting options: newest, high_rating, helpfulness, date.")
    default_sorting: String @doc(description: "Default sorting option.")
    default_sort_direction: String @doc(description: "Default sorting direction: ASC or DESC.")
}

type BprGoogleAnalyticsConfig {
    enabled: Boolean @doc(description: "Enable or disable Google Analytics tracking for reviews.")
    source: String @doc(description: "Source parameter for Google Analytics tracking.")
    medium: String @doc(description: "Medium parameter for Google Analytics tracking.")
    name: String @doc(description: "Campaign name for Google Analytics tracking.")
    term: String @doc(description: "Term parameter for Google Analytics tracking.")
    content: String @doc(description: "Content parameter for Google Analytics tracking.")
}

type BprOrderConfig {
    exclude: [String] @doc(description: "Products with those SKUs will be Excluded, can use Regular Expression, separated by ',' character.")
    include: [String] @doc(description: "Products with those SKUs will be Included, can use Regular Expression, separated by ',' character.")
}